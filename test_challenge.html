<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŒ‘æˆ˜ç³»ç»Ÿæµ‹è¯•</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; }
        .challenge-item { margin: 10px 0; padding: 10px; background: #f5f5f5; }
        .progress-bar { width: 200px; height: 20px; background: #ddd; border-radius: 10px; overflow: hidden; }
        .progress-fill { height: 100%; background: #4CAF50; transition: width 0.3s; }
        button { padding: 10px 15px; margin: 5px; cursor: pointer; }
        .log { margin: 10px 0; padding: 10px; background: #f0f0f0; font-family: monospace; font-size: 12px; }
    </style>
</head>
<body>
    <h1>æŒ‘æˆ˜ç³»ç»Ÿæµ‹è¯•</h1>
    
    <div class="test-section">
        <h3>æ¨¡æ‹Ÿç‚¹å‡»æµ‹è¯•</h3>
        <button onclick="simulateCoinClick()">æ¨¡æ‹Ÿé‡‘å¸ç‚¹å‡»</button>
        <button onclick="resetChallenge()">é‡ç½®æŒ‘æˆ˜</button>
        <button onclick="showChallengeData()">æ˜¾ç¤ºæŒ‘æˆ˜æ•°æ®</button>
        <div id="clickCount">ç‚¹å‡»æ¬¡æ•°: 0</div>
    </div>

    <div class="test-section">
        <h3>æŒ‘æˆ˜çŠ¶æ€</h3>
        <div id="challengeStatus"></div>
    </div>

    <div class="test-section">
        <h3>æ§åˆ¶å°æ—¥å¿—</h3>
        <div id="consoleLog"></div>
    </div>

    <script>
        // æ¨¡æ‹ŸæŒ‘æˆ˜ç³»ç»Ÿ
        let dailyChallenges = [];
        let totalClicks = 0;
        
        const CHALLENGES = [
            {
                id: 'click_100',
                title: 'æ‘¸é±¼æ–°æ‰‹',
                description: 'ç‚¹å‡»é‡‘å¸è¾¾åˆ°100æ¬¡',
                target: 100,
                type: 'click'
            }
        ];

        // åˆå§‹åŒ–æŒ‘æˆ˜
        function initTestChallenges() {
            dailyChallenges = CHALLENGES.map(challenge => ({
                ...challenge,
                progress: 0,
                completed: false,
                claimed: false
            }));
            log('æŒ‘æˆ˜ç³»ç»Ÿå·²åˆå§‹åŒ–');
            updateDisplay();
        }

        // æ›´æ–°æŒ‘æˆ˜è¿›åº¦
        function updateChallengeProgress(type, value = 1) {
            log(`å°è¯•æ›´æ–°æŒ‘æˆ˜è¿›åº¦ - ç±»å‹: ${type}, å€¼: ${value}`);
            let updated = false;
            
            dailyChallenges.forEach(challenge => {
                if (challenge.type === type && !challenge.completed) {
                    log(`æ‰¾åˆ°åŒ¹é…æŒ‘æˆ˜: ${challenge.title}, å½“å‰è¿›åº¦: ${challenge.progress}`);
                    if (type === 'click') {
                        challenge.progress += value;
                        log(`ç‚¹å‡»æŒ‘æˆ˜è¿›åº¦æ›´æ–°: ${challenge.progress}/${challenge.target}`);
                    }
                    
                    if (challenge.progress >= challenge.target) {
                        challenge.completed = true;
                        log(`ğŸ‰ æŒ‘æˆ˜å®Œæˆ: ${challenge.title}`);
                    }
                    
                    updated = true;
                }
            });
            
            if (updated) {
                log('æŒ‘æˆ˜è¿›åº¦å·²æ›´æ–°');
            } else {
                log('æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„æŒ‘æˆ˜ç±»å‹');
            }
            
            updateDisplay();
        }

        // æ¨¡æ‹Ÿé‡‘å¸ç‚¹å‡»
        function simulateCoinClick() {
            totalClicks++;
            log(`é‡‘å¸è¢«ç‚¹å‡»ï¼æ€»ç‚¹å‡»æ•°ï¼š${totalClicks}`);
            updateChallengeProgress('click', 1);
            document.getElementById('clickCount').textContent = `ç‚¹å‡»æ¬¡æ•°: ${totalClicks}`;
        }

        // é‡ç½®æŒ‘æˆ˜
        function resetChallenge() {
            totalClicks = 0;
            initTestChallenges();
            document.getElementById('clickCount').textContent = `ç‚¹å‡»æ¬¡æ•°: 0`;
        }

        // æ˜¾ç¤ºæŒ‘æˆ˜æ•°æ®
        function showChallengeData() {
            log('å½“å‰æŒ‘æˆ˜æ•°æ®: ' + JSON.stringify(dailyChallenges, null, 2));
        }

        // æ›´æ–°æ˜¾ç¤º
        function updateDisplay() {
            const statusDiv = document.getElementById('challengeStatus');
            statusDiv.innerHTML = '';
            
            dailyChallenges.forEach(challenge => {
                const progress = Math.min(challenge.progress / challenge.target * 100, 100);
                const item = document.createElement('div');
                item.className = 'challenge-item';
                item.innerHTML = `
                    <strong>${challenge.title}</strong><br>
                    ${challenge.description}<br>
                    è¿›åº¦: ${challenge.progress}/${challenge.target} (${progress.toFixed(1)}%)<br>
                    çŠ¶æ€: ${challenge.completed ? 'âœ… å·²å®Œæˆ' : 'â³ è¿›è¡Œä¸­'}
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${progress}%"></div>
                    </div>
                `;
                statusDiv.appendChild(item);
            });
        }

        // æ—¥å¿—å‡½æ•°
        function log(message) {
            const logDiv = document.getElementById('consoleLog');
            const time = new Date().toLocaleTimeString();
            logDiv.innerHTML += `<div>[${time}] ${message}</div>`;
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(message);
        }

        // åˆå§‹åŒ–
        initTestChallenges();
    </script>
</body>
</html>