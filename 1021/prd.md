# 图片字幕生成器产品需求文档

## 产品概述
图片字幕生成器是一个网页工具，用于在图片上添加自定义字幕，并提供字幕样式调整功能，使生成的图片具有专业的字幕效果。该工具特别实现了一种独特的字幕背景处理方式，使用原图片底部的像素行作为字幕背景。

## 核心功能

### 1. 图片上传功能
- 支持用户上传本地图片文件
- 显示已上传图片的文件名
- 图片上传后在预览区域显示原图

### 2. 字幕样式设置
- **字幕高度**：可调整字幕区域的高度（单位：像素），默认值为80px
- **字体大小**：可调整字幕文字的大小（单位：像素），默认值为40px
- **字体颜色**：通过颜色选择器选择字幕文字的颜色，支持HEX值输入，默认值为#FFFFFF（白色）
- **轮廓颜色**：通过颜色选择器选择字幕文字的轮廓颜色，支持HEX值输入，默认值为#000000（黑色）
- **字体样式**：下拉选择字体样式（如微软雅黑等），默认值为"微软雅黑"
- **字体粗细**：下拉选择字体粗细（如正常、加粗等），默认值为"正常"

### 3. 字幕内容编辑
- 多行文本输入区域，用于输入字幕内容
- 支持多行文本，每行文本将作为独立的字幕行显示

### 4. 预览功能
- 实时显示添加字幕后的图片效果
- 预览区域的图片尺寸应与上传图片保持一致

### 5. 字幕生成与保存
- **生成字幕图片**：点击按钮，根据设置生成带有字幕的图片
- **保存图片**：将生成的图片保存到本地
- **操作反馈**：生成成功后显示成功提示信息（绿色提示框）

## 特殊要求：字幕背景处理
- **第一行字幕位置**：第一行字幕行必须位于原图内的最底部行
- **所有字幕行背景**：所有字幕行（包括第一行、第二行、第三行及后续所有行）的背景都重复使用原图片最底部的一行像素
- **背景高度**：每行字幕的背景高度严格等于用户设置的字幕高度值
- **背景覆盖**：字幕背景需要完全覆盖文字所在区域，确保文字清晰可读

## 用户界面布局

### 左侧控制面板
- 顶部：图片上传区域，包含"选择图片"按钮和文件名显示
- 中部：字幕样式设置选项组，包含两行两列的布局（字幕高度/字体大小，字体颜色/轮廓颜色，字体样式/字体粗细）
- 底部：字幕内容输入区域和操作按钮（生成字幕图片、保存图片）

### 右侧预览区域
- 顶部标题为"预览"
- 中部：实时显示处理后的图片效果，包含原图和添加的多行字幕
- 底部：操作状态提示信息区域

## 视觉设计要求
- **整体风格**：简洁、专业的界面设计
- **颜色方案**：以白色为主背景，蓝色作为主要交互元素颜色
- **按钮样式**：主要操作按钮为蓝色填充，次要按钮为灰色填充
- **表单元素**：简洁的输入框、选择器和颜色选择器
- **提示信息**：成功提示为绿色背景白字

## 技术实现要点

### 图片处理
- 使用Canvas API处理图片和添加字幕
- 精确提取原图片底部的一行像素数据
- 为每行字幕应用相同的背景像素行，并设置正确的高度
- 第一行字幕需要与原图底部无缝衔接

### 用户交互
- 实时响应样式设置的变化，更新预览
- 提供直观的颜色选择器
- 简洁明了的操作按钮和状态提示

### 性能考虑
- 确保在处理较大图片时的性能流畅度
- 优化Canvas渲染过程，避免频繁重绘

## 浏览器兼容性
- 支持主流现代浏览器（Chrome、Firefox、Safari、Edge最新版本）
- 确保在不同屏幕尺寸下的良好体验（响应式设计）